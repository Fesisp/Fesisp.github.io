<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Validador de Cartão - Demo</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <style>
    :root{--bg:#0a192f;--card:#112240;--accent:#64ffda;--text:#ccd6f6}
    body{font-family:Poppins,system-ui,Arial;background:var(--bg);color:var(--text);margin:0;padding:2rem;}
    .card{max-width:720px;margin:0 auto;background:var(--card);padding:1.25rem;border-radius:10px}
    h1{color:var(--accent)}
    label{display:block;margin-top:1rem;color:#bcd}
    input[type=text]{width:100%;padding:.6rem;border-radius:6px;border:1px solid rgba(255,255,255,.06);background:#081222;color:var(--text)}
    button{margin-top:1rem;padding:.6rem 1rem;border-radius:6px;border:0;background:var(--accent);color:#012}
    .result{margin-top:1rem;padding:.6rem;border-radius:6px;background:#071226;color:var(--text)}
    .brand{font-weight:700;color:var(--accent)}
    footer{margin-top:1.25rem;text-align:right}
    a{color:var(--accent)}
  </style>
</head>
<body>
  <div class="card">
    <h1><i class='bx bx-credit-card'></i> Validador de Cartão</h1>
    <p>Insira um número de cartão para testar a validação (algoritmo Luhn) e identificar a bandeira.</p>
    <label for="card">Número do Cartão</label>
    <input id="card" type="text" inputmode="numeric" placeholder="Ex: 4111 1111 1111 1111">
    <div style="display:flex;gap:.5rem;">
      <button id="validate">Validar</button>
      <button id="clear" style="background:transparent;border:1px solid rgba(255,255,255,.06);color:var(--text)">Limpar</button>
    </div>
    <div id="output" class="result" aria-live="polite" hidden></div>
    <footer><a href="../site.html">Voltar ao site</a></footer>
  </div>

  <script>
    const cardInput = document.getElementById('card');
    const out = document.getElementById('output');
    const validateBtn = document.getElementById('validate');
    const clearBtn = document.getElementById('clear');

  function onlyDigits(s){return (s||'').replace(/\D+/g,'');}

  function detectBrand(num){
      // Visa, MasterCard, Amex, Elo (simple), Discover
      if(/^4/.test(num)) return 'Visa';
      if(/^(5[1-5]|2(2[2-9]|[3-6][0-9]|7[01]|720))/.test(num)) return 'Mastercard';
      if(/^3[47]/.test(num)) return 'American Express';
      if(/^6(?:011|5)/.test(num)) return 'Discover';
      if(/^(4011|4312|4389|4514|4576|5041|5067|5090|6277|6362|6363)/.test(num)) return 'Elo (possível)';
      return 'Desconhecida';
    }

    function luhnCheck(num){
      let sum = 0; let alt = false;
      for(let i=num.length-1;i>=0;i--){
        let n = parseInt(num.charAt(i),10);
        if(alt){ n *= 2; if(n>9) n -= 9; }
        sum += n; alt = !alt;
      }
      return sum % 10 === 0;
    }

    validateBtn.addEventListener('click', ()=>{
      const raw = cardInput.value;
      const num = onlyDigits(raw);
      if(!num){ out.hidden=false; out.textContent='Por favor digite um número de cartão.'; return; }
      const brand = detectBrand(num);
      const valid = luhnCheck(num);
      out.hidden=false;
      out.innerHTML = `Bandeira: <span class="brand">${brand}</span>\nValidação Luhn: <strong>${valid? 'VÁLIDO' : 'INVÁLIDO'}</strong>`;
    });

    clearBtn.addEventListener('click', ()=>{ cardInput.value=''; out.hidden=true; });

    // small UX: allow enter to validate
    cardInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') validateBtn.click(); });
  </script>
</body>
</html>